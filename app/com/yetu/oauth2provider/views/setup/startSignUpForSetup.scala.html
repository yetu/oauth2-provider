@(startForm:Form[securesocial.controllers.RegistrationInfo])(implicit request: RequestHeader)
@import com.yetu.oauth2provider.views
@import helper._
@import com.yetu.oauth2provider.controllers.setup.SetupController._
@implicitFieldConstructor = @{ FieldConstructor(com.yetu.oauth2provider.views.html.yetuAuthentication.inputFieldConstructor.f) }

<!DOCTYPE html>

<html>
	<head>
        <title>Registration</title>
        <link rel="stylesheet" media="screen" href="@controllers.routes.Assets.versioned("stylesheets/setup.css")">
        <link rel="stylesheet" media="screen" href="@controllers.routes.Assets.versioned("stylesheets/steps.css")">
        <link rel="stylesheet" media="screen" href="@controllers.routes.Assets.versioned("stylesheets/setup_startSignUp.css")">
        <link rel="shortcut icon" type="image/png" href="">
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	</head>
	<body>
		@views.html.setup.header(true)
		<div class="content">
            @views.html.setup.steps(1)
            <div class="content__main">
                <div name="setupSignup" id="leftContainer" class="left">
                    <div class="left__fieldsmandatory">@Messages("setup.signup.allfieldsmandatory")</div>
                    <form action="@com.yetu.oauth2provider.controllers.setup.routes.SetupController.handleStartSignUp"
                    class="left__form" id="signup_form"
                    autocomplete="off" method="post">
                        <fieldset class="left__fieldset">
                            @CSRF.formField
                            @helper.inputRadioGroup(
                                filledNewUserForm(UserRegistrationStatus),
                                options = Seq(
                                    UserNotRegistered -> Messages("setup.signup.register"),
                                    UserAlreadyRegistered -> Messages("setup.signup.already")
                                )
                            )
                            @helper.inputText(
                                startForm("firstName"),
                                '_label -> Messages("securesocial.signup.firstName"),
                                'class -> "left__input",
                                '_error -> startForm("firstName").error.map(_.withMessage(Messages("setup.signup.error.required")))
                            )

                            @helper.inputText(
                                startForm("lastName"),
                                '_label -> Messages("securesocial.signup.lastName"),
                                'class -> "left__input",
                                '_error -> startForm("lastName").error.map(_.withMessage(Messages("setup.signup.error.required")))
                            )

                            @helper.inputText(
                                startForm("email"),
                                '_label -> Messages("securesocial.signup.email1"),
                                'class -> "left__input",
                                '_error -> startForm("email").error.map(_.withMessage(Messages("setup.signup.error.required")))
                            )

                            @helper.inputPassword(
                                startForm("password.password1"),
                                '_label -> Messages("securesocial.signup.password1"),
                                'class -> "left__input",
                                '_error -> startForm("password.password1").error.map(_.withMessage(Messages("setup.signup.error.password")))
                            )

                            @helper.inputPassword(
                                startForm("password.password2"),
                                '_label -> Messages("securesocial.signup.password2"),
                                '_error -> startForm("password.password2").error.map(_.withMessage(Messages("setup.signup.error.required")))
                            )

                            @helper.inputCheckboxGroup(
                                startForm("getinfo"),
                                options = Seq("getInfo" -> Messages("setup.signup.getinfo")),
                                '_label -> "getinfo"
                            )

                            @helper.inputCheckboxGroup(
                                startForm("agreement"),
                                options = Seq("agreement" -> "agreement"),
                                '_label -> "agreements",
                                '_error -> startForm("agreement").error.map(_.withMessage("Please read the agreement."))
                            )


                            @request.flash.get("error").map { msg =>
                                <div class="alert alert-error">
                                    @Messages(msg)
                                </div>
                            }
                        </fieldset>
                </form>
                </div>
                <div id="rightContainer" class="right">
                    <p class="right__text">@Messages("setup.signup.ifalreadyregistered")</p>
                    <p class="right__text">@Html(Messages("setup.signup.clicknext"))</p>
                </div>
                <div class="clear"></div>
                <div class="buttoncontainer">
                    <button type="submit" form="signup_form" class="button buttoncontainer__next-button">
                            @Html(Messages("setup.next"))
                    </button>
                </div>
            </div>
		</div>
		@views.html.setup.footer()
        <script src="@controllers.routes.Assets.versioned("javascripts/formMessageGenerator.js")"></script>
        <script>
            var hoverHelp = function(element){
                if( element.nextSibling && element.nextSibling.nextSibling){
                    element.nextSibling.nextSibling.setAttribute('class', 'help-block');
                }
            };
            var blurHelp = function(element){
                if( element.nextSibling && element.nextSibling.nextSibling){
                    element.nextSibling.nextSibling.setAttribute('class', 'help-block display-none');
                }
            };

            document.body.onload = function(){
                document.getElementById("agreement" ).childNodes[3].innerHTML =
                '<span>'+'@Messages("setup.signup.terms1")'+'</span>'
                    +'<a class="left__link" href="">'+' @Html(Messages("setup.signup.termslink1"))'+'</a>'
                    +'<span>'+' @Messages("setup.signup.terms2")'+'</span>'
                    +'<a class="left__link" href="">'+' @Html(Messages("setup.signup.termslink2"))'+'</a>'
                    +'<span>'+' @Messages("setup.signup.terms3")'+'</span>'
                    +'<a class="left__link" href="">'+' @Html(Messages("setup.signup.termslink3"))'+'</a>'
                    +'<span>'+' @Html(Messages("setup.signup.terms4"))'+'</span>';
                window.FormMessageGenerator.load();
            }
        </script>
	</body>
</html>
